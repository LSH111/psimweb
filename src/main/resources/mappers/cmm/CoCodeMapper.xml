<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.psim.web.cmm.mapper.CoCodeMapper">

    <!-- 그룹코드별 공통코드 목록 조회 -->
    <select id="selectCodeListByGroup" parameterType="string" resultType="com.psim.web.cmm.vo.CoCodeVO">
        SELECT 
            group_cd as groupCd,
            code_cd as codeCd,
            code_nm as codeNm,
            code_desc as codeDesc,
            use_yn as useYn,
            sort_ordr as sortOrdr
        FROM cpk.tb_co_code
        WHERE group_cd = #{groupCd}
        AND use_yn = 'Y'
        ORDER BY sort_ordr ASC, code_cd ASC
    </select>

    <!-- 상위 코드에 따른 하위 코드 목록 조회 -->
    <select id="selectSubCodeList" parameterType="map" resultType="com.psim.web.cmm.vo.CoCodeVO">
        SELECT 
            group_cd as groupCd,
            code_cd as codeCd,
            code_nm as codeNm,
            code_desc as codeDesc,
            use_yn as useYn,
            sort_ordr as sortOrdr
        FROM cpk.tb_co_code
        WHERE group_cd = #{groupCd}
        AND use_yn = 'Y'
        <if test="upperCodeCd != null and upperCodeCd != ''">
            AND upper_code_cd = #{upperCodeCd}
        </if>
        ORDER BY sort_ordr ASC, code_cd ASC
    </select>

</mapper>
